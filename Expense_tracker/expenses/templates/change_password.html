{% extends 'base.html' %}
{% block title %}Change Password | Spendora{% endblock %}
{% block content %}

<div class="d-flex justify-content-center align-items-center"
     style="min-height: 100vh; background: linear-gradient(135deg, #6e8efb, #a777e3);">

  <div class="card shadow-lg border-0 rounded-4"
       style="width: 420px; background-color: #ffffffee;">
    <div class="card-body p-4">

      <h3 class="text-center mb-4 fw-bold" style="color: #4a47a3;">
        Change Password
      </h3>

      <form method="POST" novalidate>
        {% csrf_token %}

        <div class="mb-3">
          <label for="old_password" class="form-label fw-semibold">Old Password</label>
          <input type="password" name="old_password" id="old_password"
                 class="form-control form-control-lg rounded-3 shadow-sm"
                 placeholder="Enter old password" required>
        </div>

        <div class="mb-3">
          <label for="new_password1" class="form-label fw-semibold">New Password</label>
          <input type="password" name="new_password1" id="new_password1"
                 class="form-control form-control-lg rounded-3 shadow-sm"
                 placeholder="Enter new password" required>
        </div>

        <div class="mb-4">
          <label for="new_password2" class="form-label fw-semibold">Confirm New Password</label>
          <input type="password" name="new_password2" id="new_password2"
                 class="form-control form-control-lg rounded-3 shadow-sm"
                 placeholder="Confirm new password" required>
        </div>

        <button type="submit"
                class="btn btn-primary w-100 py-2 rounded-3 fw-semibold"
                style="background: linear-gradient(90deg, #6e8efb, #a777e3); border: none;">
          Update Password
        </button>
      </form>

      <div class="text-center mt-3">
        <a href="{% url 'profile' %}" class="text-decoration-none fw-semibold"
           style="color: #4a47a3;">
          <i class="bi bi-arrow-left"></i> Back to Profile
        </a>
      </div>

    </div>
  </div>
</div>

{% if messages %}
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
document.addEventListener("DOMContentLoaded", function () {

    {% for message in messages %}
    
    Swal.fire({
        title: "{{ message.tags|capfirst }}",
        text: "{{ message|escapejs }}",
        icon: "{{ message.tags }}",
        timer: 2000,
        showConfirmButton: false
    }).then(function() {
        {% if message.tags == "success" %}
            window.location.href = "{% url 'profile' %}";
        {% endif %}
    });

    {% endfor %}

});
</script>
{% endif %}


<!-- Animations -->
<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

<style>
  .card {
    animation: fadeIn 0.8s ease-in-out;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  input:focus {
    border-color: #a777e3 !important;
    box-shadow: 0 0 8px rgba(167, 119, 227, 0.3) !important;
  }
</style>

{% endblock %}
